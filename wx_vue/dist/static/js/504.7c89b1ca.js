"use strict";(self["webpackChunkwx_vue"]=self["webpackChunkwx_vue"]||[]).push([[504],{504:function(e,t,l){l.r(t),l.d(t,{default:function(){return w}});var a=l(3396),s=l(7139);const o=e=>((0,a.dD)("data-v-5b26f786"),e=e(),(0,a.Cn)(),e),r={class:"bg"},m={id:"register"},i=o((()=>(0,a._)("h2",null,"注册页面",-1))),d=(0,a.Uk)("注册");function n(e,t,l,o,n,u){const c=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),f=(0,a.up)("el-button"),p=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",m,[i,(0,a.Wm)(p,{ref:"form",model:n.form,"label-width":"20%"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"用户名:"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.username=e),placeholder:"username"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"密  码:"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.password=e),type:"password",placeholder:"password"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"邮 箱:"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.form.email,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form.email=e),placeholder:"email"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"验证码:"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.form.emailcode,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form.emailcode=e),style:{width:"49%","margin-right":"2%"}},null,8,["modelValue"]),(0,a.Wm)(f,{type:"primary",disabled:n.yzm_disabled,style:{width:"49%"},onClick:u.sendcode},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(n.yzm_txt),1)])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},8,["model"]),(0,a.Wm)(f,{type:"primary",round:"",onClick:u.register,class:"btn"},{default:(0,a.w5)((()=>[d])),_:1},8,["onClick"])])])}l(5449);var u=l(6265),c=l.n(u);c().defaults.withCredentials=!0;var h={data(){return{time:0,yzm_disabled:!1,yzm_txt:"获取验证码",form:{username:"",password:"",email:"",emailcode:""},isnull:!1}},components:{},methods:{register(){var e=/^[a-zA-Z0-9_-]{3,15}$/;""==this.form.username?this.$message.error("用户名不能为空"):""==this.form.password?this.$message.error("密码不能为空"):""==this.form.emailcode?this.$message.error("验证码不能为空"):e.test(this.form.username)?e.test(this.form.password)?c().post("http://localhost:8000/api/register/",{emailcode:this.form.emailcode,username:this.form.username,email:this.form.email,password:this.form.password}).then((e=>{if(200==e.data.status){let e=this;e.$confirm("注册成功","是否返回登录页",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success",distinguishCancelAndClose:!1,closeOnClickModal:!1}).then((function(){e.$router.push("/")})).catch((function(e){("cancel"==e||"close"==e)&&console.log("取消")}))}else if(202==e.data.status){let e=this;e.$alert("用户名已存在","注册失败",{confirmButtonText:"确定",callback:e=>{this.form.username="",this.form.password=""}})}else if(203==e.data.status){let e=this;e.$alert("验证码错误","注册失败",{confirmButtonText:"确定",callback:e=>{this.form.emailcode=""}})}else{let t=this;t.$alert(e.data.error,"注册失败",{confirmButtonText:"确定",callback:e=>{this.form.emailcode=""}})}})).catch((e=>{console.log("操作失败"+e)})):this.$message.error("密码格式不正确(3-15字符的大小写字母和数字下划线)"):this.$message.error("用户名格式不正确(3-15字符的大小写字母和数字下划线)")},sendcode(){var e=/^[a-zA-Z0-9_-]+([-_.][a-zA-Z0-9_-]+)*@([a-zA-Z0-9_-]+[-.])+[a-zA-Z0-9_-]{2,5}$/;""==this.form.email?alert("请输入邮箱"):e.test(this.form.email)?(this.time=60,this.yzm_disabled=!0,this.timer(),c().post("http://localhost:8000/api/sendcode/",{email:this.form.email}).then((e=>{console.log("发送成功"+e)})).catch((e=>{console.log("操作失败"+e)}))):alert("邮箱格式不正确")},timer(){this.time>0?(this.time--,this.yzm_txt=this.time+"s后重新获取",setTimeout(this.timer,1e3)):(this.time=0,this.yzm_txt="获取验证码",this.yzm_disabled=!1)}}},f=l(89);const p=(0,f.Z)(h,[["render",n],["__scopeId","data-v-5b26f786"]]);var w=p}}]);
//# sourceMappingURL=504.7c89b1ca.js.map